{% extends "base.html" %}
{% load humanize %}
{% block content %}
<div class="row">
  <div class="col-md-12">
    <ol class="breadcrumb">
      <li><a href="{% url 'frontpage' %}">Home</a></li>
      <li><a href="{% url 'projects_list' %}">Projects</a></li>
      {% if invoice.project_m.guid %}
      <li><a href="{% url 'project' invoice.project_m.guid %}">Project</a></li>
      {% endif %}
      <li><a href="{% url 'invoice' invoice.invoice_id %}">Invoice</a></li>
      <li class="active">Hours</li>
    </ol>

    <h2>{{ invoice.full_name }}: {{ invoice.date }}</h2>

    <table class="table table-striped table-condensed">
      <thead>
        <tr>
          <th>Date</th>
          <th>Person</th>
          <th>Phase</th>
          <th>Category</th>
          <th>Billable</th>
          <th>Notes</th>
          <th class="number-column">Hours</th>
          <th class="number-column">Rate</th>
          <th class="number-column">Price</th>
      </thead>
      <tbody>
        {% for entry in entries %}
        <tr>
          <td class="nowrap-column">{{ entry.date }}</td>
          <td class="nowrap-column">{% if entry.user_m %}<a href="{% url "person" entry.user_m.guid entry.date.year entry.date.month %}">{{ entry.user_name }}</a>{% else %}{{ entry.user_name }}{% endif %}</td>
          <td class="nowrap-column">{{ entry.phase_name }}</td>
          <td class="nowrap-column">{{ entry.category }}</td>
          <td>{{ entry.calculated_is_billable }}</td>
          <td>{{ entry.notes }}</td>
          <td class="number-column">{{ entry.incurred_hours|floatformat:2 }}h</td>
          <td class="number-column">{{ entry.bill_rate|floatformat:2 }}&euro;/h</td>
          <td class="number-column">{{ entry.incurred_money|floatformat:2 }}&euro;</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
